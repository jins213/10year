<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>10年カウントダウン</title>

<style>
/* ===== 全体 ===== */
body {
  margin: 0;
  height: 100vh;
  display: grid;
  place-items: center;
  font-family: "Segoe UI", system-ui, sans-serif;
  background: radial-gradient(circle at top, #1e293b, #020617);
  color: white;
}
    
/* ===== 入力欄だけ中央寄せ ===== */
#inputArea textarea {
  display: block;
  margin-left: auto;
  margin-right: auto;
}


/* textarea を中央にする */
#inputArea textarea {
  display: block;
  margin: 0 auto;
  width: 90%;
}

/* 決定ボタンも中央 */
#inputArea button {
  display: block;
  margin: 18px auto 0;
}


    
/* ===== 背景 ===== */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background:
    linear-gradient(120deg, rgba(56,189,248,0.15), transparent 60%),
    linear-gradient(300deg, rgba(168,85,247,0.15), transparent 60%);
  z-index: -1;
}

/* ===== カード ===== */
.card {
  width: min(92vw, 520px);
  padding: 32px;
  border-radius: 20px;
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(14px);
  box-shadow: 0 0 40px rgba(0,0,0,0.6);
  text-align: center;
}

/* ===== 見出し ===== */
h1, h2 {
  margin: 0 0 10px;
}

/* ===== カウントダウン ===== */
#countdown {
  font-size: 1.2rem;
  margin: 20px 0 28px;
  font-weight: 600;
  color: #38bdf8;
}

/* ===== 入力 ===== */
textarea {
  width: 100%;
  height: 130px;
  background: rgba(0,0,0,0.4);
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 14px;
  padding: 14px;
  color: white;
  font-size: 1rem;
  resize: none;
}

/* ===== ボタン ===== */
button {
  margin-top: 18px;
  padding: 12px 28px;
  border-radius: 999px;
  border: none;
  background: linear-gradient(135deg, #38bdf8, #a855f7);
  color: white;
  font-size: 1rem;
  cursor: pointer;
}

.edit-btn {
  background: linear-gradient(135deg, #f59e0b, #f97316);
}

/* ===== メッセージ ===== */
.message-box {
  background: rgba(0,0,0,0.4);
  border-radius: 14px;
  padding: 18px;
  white-space: pre-wrap;
  margin-top: 20px;
}

/* ===== フェード演出 ===== */
.fade-out {
  animation: fadeOut 1s forwards;
}

.fade-in {
  animation: fadeIn 1.2s forwards;
}

@keyframes fadeOut {
  to { opacity: 0; }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ===== 非表示 ===== */
.hidden {
  display: none;
}

/* ===== フッター ===== */
.footer-text {
  margin-top: 22px;
  font-size: 0.85rem;
  opacity: 0.7;
}
</style>
</head>

<body>

<div class="card" id="card">

  <!-- ===== カウント前 ===== -->
  <div id="before">
    <h1>10年カウントダウン</h1>
    <div id="countdown"></div>

    <div id="inputArea">
      <textarea id="message" placeholder="未来の自分へのメッセージ"></textarea>
      <button onclick="sendMessage()">決定</button>
    </div>

    <button id="editButton" class="edit-btn hidden" onclick="enableEdit()">編集する</button>
  </div>

  <!-- ===== カウント後 ===== -->
  <div id="after" class="hidden">
    <h2>あれから10年が経ちました。</h2>
    <p>自分からのメッセージ</p>
    <div class="message-box" id="finalMessage"></div>
  </div>

  <div class="footer-text" id="footer"></div>
</div>

<script>
/* ===== 設定 ===== */
const FOOTER_TEXT = "※デバイスを変更した場合データは消えます";

/* ===== 設定（ここを編集） ===== */
const targetDate = new Date(2035, 0, 1, 0, 0, 0);


/* ===== 保存キー ===== */
const MESSAGE_KEY = "futureMessage";
const SENT_KEY = "futureMessageSent";

/* ===== 状態 ===== */
let savedMessage = localStorage.getItem(MESSAGE_KEY);
let sent = localStorage.getItem(SENT_KEY) === "true";

/* ===== 初期処理 ===== */
footer.textContent = FOOTER_TEXT;

if (sent) {
  inputArea.classList.add("hidden");
  editButton.classList.remove("hidden");
}

/* ===== カウントダウン ===== */
function updateCountdown() {
  const diff = targetDate - new Date();

  if (diff <= 0) {
    card.classList.add("fade-out");

    setTimeout(() => {
      before.classList.add("hidden");
      after.classList.remove("hidden");
      card.classList.remove("fade-out");
      card.classList.add("fade-in");

      finalMessage.textContent =
        savedMessage || "（メッセージはありません）";
    }, 1000);

    clearInterval(timer);
    return;
  }

  const d = Math.floor(diff / 86400000);
  const h = Math.floor(diff / 3600000) % 24;
  const m = Math.floor(diff / 60000) % 60;
  const s = Math.floor(diff / 1000) % 60;

  countdown.textContent = `${d}日 ${h}時間 ${m}分 ${s}秒`;
}

/* ===== 送信 ===== */
function sendMessage() {
  if (sent) return;

  const text = message.value.trim();
  if (!text) return alert("メッセージを書いてください");

  if (!confirm("この内容で保存しますか？\n※編集ボタンで再度編集可能です")) return;

  localStorage.setItem(MESSAGE_KEY, text);
  localStorage.setItem(SENT_KEY, "true");

  savedMessage = text;
  sent = true;

  inputArea.classList.add("hidden");
  editButton.classList.remove("hidden");
}

/* ===== 編集 ===== */
function enableEdit() {
  inputArea.classList.remove("hidden");
  editButton.classList.add("hidden");
  sent = false;
  localStorage.setItem(SENT_KEY, "false");
}

/* ===== 開始 ===== */
updateCountdown();
const timer = setInterval(updateCountdown, 1000);
</script>

</body>
</html>

